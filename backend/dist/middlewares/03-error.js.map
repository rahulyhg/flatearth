{"version":3,"sources":["../../src/middlewares/03-error.js"],"names":["ctx","next","e","status","console","log","body","message","error","stack"],"mappings":";;;;;;kBAAe,OAAOA,GAAP,EAAYC,IAAZ,KAAqB;AAClC,MAAI;AACF,UAAMA,MAAN;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACV,QAAIA,EAAEC,MAAN,EAAc;AACZ;AACAC,cAAQC,GAAR,CAAYH,EAAEC,MAAd;AACAH,UAAIG,MAAJ,GAAaD,EAAEC,MAAf;AACAH,UAAIM,IAAJ,GAAW,EAAEH,QAAQ,OAAV,EAAmBI,SAASL,EAAEK,OAA9B,EAAX;AACD,KALD,MAKO;AACLP,UAAIM,IAAJ,GAAW,WAAX;AACAN,UAAIG,MAAJ,GAAa,GAAb;AACAC,cAAQI,KAAR,CAAcN,EAAEK,OAAhB,EAAyBL,EAAEO,KAA3B;AACD;AACF;AACF,C","file":"03-error.js","sourcesContent":["export default async (ctx, next) => {\n  try {\n    await next();\n  } catch (e) {\n    if (e.status) {\n      // could use template methods to render error page\n      console.log(e.status);\n      ctx.status = e.status;\n      ctx.body = { status: 'error', message: e.message };\n    } else {\n      ctx.body = 'Error 500';\n      ctx.status = 500;\n      console.error(e.message, e.stack);\n    }\n  }\n};\n"]}